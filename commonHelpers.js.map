{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(query, page) {\n  const url = 'https://pixabay.com/api/';\n  \n  const params = {\n    key: '43045926-d10eb038526040017b5fd39ad',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  const response = await axios.get(url, { params });\n  return response.data;\n  \n}\n","\nimport iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css'; \n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { select } from '../main';\n\n\nexport function renderImg(images) {\n  const gallery = document.querySelector('.gallery-img');\n \n  if (images.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      color: 'red',\n      position: 'topRight',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n  `<a href=\"${largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    <div class=\"info\">\n      <p><strong>Likes:</strong> ${likes}</p>\n      <p><strong>Views:</strong> ${views}</p>\n      <p><strong>Comments:</strong> ${comments}</p>\n      <p><strong>Downloads:</strong> ${downloads}</p>\n    </div>\n  </a>`).join('');\n    \n  select.gallery.insertAdjacentHTML('beforeend', markup);\n\n    let lightbox = new SimpleLightbox('.gallery-item', { captionsData: 'alt', });\n    lightbox.refresh();\n}","import iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css'; \n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport {renderImg} from \"./js/render-functions\"\n\nconst perPage = 15;\nlet page = 1, query, maxPage = 0;\n\nexport const select = {\n  form: document.querySelector('.form'),\n  input: document.getElementById('query'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery-img'),\n  btnMore: document.querySelector('.btn-load-more'),\n}\n\nselect.form.addEventListener('submit', submitBtn);\nselect.btnMore.addEventListener('click', clickloadMore);\n\nconst toggleLoader = (show) => select.loader.classList[show ? 'remove' : 'add']('is-hidden');\nconst toggleLoadMore = (show) => select.btnMore.classList[show ? 'remove' : 'add']('is-hidden');\n\ntoggleLoader(false);\ntoggleLoadMore(false);\n\nasync function submitBtn(event) {\n  event.preventDefault();\n  toggleLoader(true);\n  query = select.input.value.trim();\n  page = 1;\n  select.gallery.innerHTML = ''\n  if (!query) {\n    iziToast.error({\n      message: 'Please enter a request',\n      position: 'topRight',\n    });\n    toggleLoadMore(false);\n    scroll();\n    return;\n  } try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      toggleLoadMore(false);\n      toggleLoader(false);\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderImg(data.hits);\n  } catch (error) {console.error(error);}\n  toggleLoader(false);\n  finishItems();\n  select.form.reset();\n}\n\nasync function clickloadMore() {\n  page += 1;\n  toggleLoader(true);\n  try {\n    const data = await fetchImages(query, page);\n    renderImg(data.hits);\n  } catch (error) {console.error(error);}\n  scroll();\n  finishItems();\n  toggleLoader(false);\n}\n\nfunction finishItems() {\n  if (page >= maxPage) {\n    toggleLoadMore(false);\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      color: 'yellow'\n    });\n  } else {toggleLoadMore(true);}\n}\n\nfunction scroll() {\n  const cardHeight = select.gallery.firstChild.getBoundingClientRect().height;\n  const currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;\n  window.scroll({\n    top: currentScrollPosition + cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["fetchImages","query","page","url","params","axios","renderImg","images","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","select","SimpleLightbox","perPage","maxPage","submitBtn","clickloadMore","toggleLoader","show","toggleLoadMore","event","scroll","data","error","finishItems","cardHeight","currentScrollPosition"],"mappings":"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"}