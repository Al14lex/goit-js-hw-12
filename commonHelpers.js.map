{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchImages(query, currentPage) {\n  const url = 'https://pixabay.com/api/';\n  \n  const params = {\n    key: '43045926-d10eb038526040017b5fd39ad',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const response = await axios.get(url, { params });\n  return response.data;\n}\n","\nimport iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css'; \n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { select } from '../main';\n\nexport function renderImg(arr) {\n  function imgTemplate({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) {\n    return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${webformatURL}\">\n          <img loading=\"lazy\" class=\"gallery-image\" src=\"${largeImageURL}\" alt=\"${tags}\" />\n        </a>\n          <div class=\"image-info\">\n      <ul class=\"infoBlock\">\n      <li class=\"title\">Likes</li>\n      <li class=\"info\">${likes}</li>\n      </ul>\n      <ul class=\"infoBlock\">\n      <li class=\"title\">Views</li>\n      <li class=\"info\">${views}</li>\n      </ul>\n      <ul class=\"infoBlock\">\n      <li class=\"title\">Comments</li>\n      <li class=\"info\">${comments}</li>\n      </ul>\n      <ul class=\"infoBlock\">\n      <li class=\"title\">Downloads</li>\n      <li class=\"info\">${downloads}</li>\n      </ul>\n      </div>\n    </li>`;\n  }\n\n  function imgsTemplate(arr) {\n    return arr.map(imgTemplate).join('');\n  }\n\n  const markup = imgsTemplate(arr);\n  select.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});","\nimport iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css'; \n\nimport SimpleLightbox from 'simplelightbox'; \nimport 'simplelightbox/dist/simple-lightbox.min.css'; \n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport {renderImg} from \"./js/render-functions\"\n\n\nlet currentPage = 1;\nlet query;\nlet maxPage = 0;\nconst perPage = 15;\n\nexport const select = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery-img'),\n  btnMore: document.querySelector('.btn-load-more'),\n}\n\nselect.form.addEventListener('submit', submit);\nselect.btnMore.addEventListener('clicl', clickloadMore);\n\ndeleteLoader();\nhideLoadMore();\n\nfunction showLoadMore() {\n  select.btnMore.classList.remove('is-hidden');\n}\nfunction hideLoadMore() {\n  select.btnMore.classList.add('is-hidden');\n}\nfunction deleteLoader() {\n  select.loader.classList.add('is-hidden');\n}\nfunction addLoader() {\n  select.loader.classList.remove('is-hidden');\n}\n\nasync function submit(e) {\n  e.preventDefault();\n  addLoader();\n\n  query = e.target.elements.request.value.trim();\n  select.gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (!query) {\n    deleteLoader();\n    hideLoadMore();\n    iziToast.error({\n      message: 'Please enter a request',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    const data = await fetchImages(query, currentPage);\n    if (data.hits.length === 0) {\n       deleteLoader();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderImg(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n\n  deleteLoader();\n  finishItems();\n  select.form.reset();\n}\n\nasync function clickloadMore() {\n  currentPage += 1;\n  addLoader();\n  try {\n    const data = await fetchImages(query, currentPage);\n    renderImg(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n\n  scroll();\n  finishItems();\n  deleteLoader();\n}\n\nfunction finishItems() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\nfunction scroll() {\n  const size = select.gallery.firstChild.getBoundingClientRect().size;\n\n  scrollBy({\n    top: size,\n    behavior: 'smooth',\n  });\n}"],"names":["fetchImages","query","currentPage","url","params","axios","renderImg","arr","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","markup","select","lightbox","SimpleLightbox","maxPage","perPage","submit","clickloadMore","deleteLoader","hideLoadMore","showLoadMore","addLoader","e","iziToast","data","error","finishItems","scroll","size"],"mappings":"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"}